<<<<<<< HEAD
<<<<<<< HEAD
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="auth">
 	

 <resultMap id="authorityMap" type="simpleGrantedAuthority">
      <constructor>
         <arg column="authority" javaType="string" />
      </constructor>
   </resultMap>
   
   
   <resultMap id="memberExtMap" type="memberExt">
         <id column="MEMBER_NO" property="memberNo"/>
         <result column="MEMBER_NICKNAME" property="memberNickname"/>
         <result column="MEMBER_EMAIL" property="memberEmail"/>
         <result column="MEMBER_INTRODUCE" property="memberIntroduce"/>
         <result column="MEMBER_CREATE_DATE" property="memberCreateDate"/>
         <result column="MEMBER_MODIFY_DATE" property="memberModifyDate"/>
         <result column="MEMBER_STATUS" property="memberStatus"/>
       
=======
=======
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="auth">
 	

<<<<<<< HEAD
	
	<resultMap id="authorityMap" type="simpleGrantedAuthority">
		<constructor>
			<arg column="authority" javaType="string" />
		</constructor>
	</resultMap>
	
	
	<resultMap id="memberExtMap" type="memberExt">
			<id column="MEMBER_NO" property="memberNo"/>
			<result column="MEMBER_NICKNAME" property="memberNickname"/>
			<result column="MEMBER_EMAIL" property="memberEmail"/>
			<result column="MEMBER_INTRODUCE" property="memberIntroduce"/>
			<result column="MEMBER_CREATE_DATE" property="memberCreateDate"/>
			<result column="MEMBER_MODIFY_DATE" property="memberModifyDate"/>
			<result column="MEMBER_STATUS" property="memberStatus"/>
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
 <resultMap id="authorityMap" type="simpleGrantedAuthority">
      <constructor>
         <arg column="authority" javaType="string" />
      </constructor>
   </resultMap>
   
   
   <resultMap id="memberExtMap" type="memberExt">
         <id column="MEMBER_NO" property="memberNo"/>
         <result column="MEMBER_NICKNAME" property="memberNickname"/>
         <result column="MEMBER_EMAIL" property="memberEmail"/>
         <result column="MEMBER_INTRODUCE" property="memberIntroduce"/>
         <result column="MEMBER_CREATE_DATE" property="memberCreateDate"/>
         <result column="MEMBER_MODIFY_DATE" property="memberModifyDate"/>
         <result column="MEMBER_STATUS" property="memberStatus"/>
       
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
       
       <association property="comment" javaType="comment">
           <id column="COMMENT_NO" property="commentNo"/>
           <result column="COMMENT_WRITER_MEMBER_NO" property="commentWriterMemberNo"/>
           <result column="COMMENT_MEMBER_NO" property="commentMemberNo"/>
           <result column="COMMENT_TEXT" property="commentText"/>
           <result column="COMMENT_CREATE_DATE" property="commentCreateDate"/>
           <result column="COMMENT_MODIFY_DATE" property="commentModifyDate"/>
       </association>
       
<<<<<<< HEAD
<<<<<<< HEAD
       
=======
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
       
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
       <association property="memberBanner" javaType="memberBanner">
           <id column="MEMBER_BANNER_NO" property="memberBannerNo"/>
           <result column="MEMBER_BANNER_PATH" property="memberBannerPath"/>
       </association>
       
<!--       <association property="memberGrade" javaType="memberGrade">
           <id column="MEMBER_GRADE_NO" property="memberGradeNo"/>
           <result column="MEMBER_GRADE_NAME" property="memberGradeName"/>
       </association>
       -->
       
       <association property="memberSocial" javaType="memberSocial">
           <id column="MEMBER_SOCIAL_MEMBER_NO" property="memberSocialMemberNo"/>
           <result column="MEMBER_SOCIAL_SOCIAL_NAME" property="memberSocialSocialName"/>
           <result column="MEMBER_SOCIAL_SOCIAL_ID" property="memberSocialSocialId"/>
       </association>

<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
      <collection property="authorities"
               javaType="list"
               ofType="simpleGrantedAuthority">
         <constructor>
               <arg column="MEMBER_GRADE_NAME" javaType="string"/>
           </constructor>
      </collection>
<<<<<<< HEAD
   
     <collection property="profileImage" ofType="profileImage">
=======
		<collection property="authorities"
					javaType="list"
					ofType="simpleGrantedAuthority">
			<constructor>
            	<arg column="MEMBER_GRADE_NAME" javaType="string"/>
        	</constructor>
		</collection>
   
       <collection property="profileImage" ofType="profileImage">
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
   
     <collection property="profileImage" ofType="profileImage">
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
           <id column="PROFILE_IMAGE_NO" property="profileImageNo"/>
           <result column="PROFILE_IMAGE_PATH" property="profileImagePath"/>
       </collection>
   </resultMap>
 
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
 <select id="loadUserByUsername" resultMap="memberExtMap">
      SELECT MEMBER_NO , PROFILE_IMAGE_PATH, MEMBER_BANNER_PATH, MEMBER_SOCIAL_SOCIAL_NAME, MEMBER_SOCIAL_SOCIAL_ID,
            MEMBER_NICKNAME, MEMBER_EMAIL, MEMBER_INTRODUCE, MEMBER_GRADE_NAME
      FROM MEMBER
      		JOIN MEMBER_SOCIAL ON MEMBER_SOCIAL_MEMBER_NO = MEMBER_NO
      		JOIN MEMBER_GRADE USING(MEMBER_GRADE_NO)
      		JOIN MEMBER_BANNER USING(MEMBER_BANNER_NO)
      		JOIN PROFILE_IMAGE ON MEMBER_PROFILE_IMAGE_NO = PROFILE_IMAGE_NO
      		
      WHERE
         MEMBER_SOCIAL_SOCIAL_ID = #{socialId} 
         AND
         MEMBER_SOCIAL_SOCIAL_NAME = #{socialType}
         AND
         MEMBER_STATUS = 'Y'
   </select>
 	
	<resultMap id="memberExtMap2" type="memberExt">
		<id column="MEMBER_NO" property="memberNo" />
		<result column="MEMBER_NICKNAME" property="memberNickname" />
		<result column="MEMBER_EMAIL" property="memberEmail" />
		
		<association property="profileImage" javaType="profileImage">
			<id column="PROFILE_IMAGE_NO" property="profileImageNo"/>
           	<result column="PROFILE_IMAGE_PATH" property="profileImagePath"/>
		</association>
		
		
	</resultMap>
   
    <select id="selectFollowerCount" resultType="int">
   		SELECT 
   			COUNT(FOLLOW_TARGET_MEMBER_NO) AS FOLLOWER_COUNT
   		FROM
   			FOLLOW
   		WHERE
   			FOLLOW_TARGET_MEMBER_NO = #{mNo}
   		GROUP BY FOLLOW_TARGET_MEMBER_NO

  	 </select>
   
	 	
	 	<select id="selectFollowList" resultMap="memberExtMap2">
			SELECT
				FOLLOW.FOLLOW_TARGET_MEMBER_NO AS MEMBER_NO,
			    TARGET_MEMBER.MEMBER_NICKNAME AS MEMBER_NICKNAME,
			    TARGET_MEMBER.MEMBER_EMAIL AS MEMBER_EMAIL,
			    PROFILE_IMAGE.PROFILE_IMAGE_PATH AS PROFILE_IMAGE_PATH,
			  	PROFILE_IMAGE.PROFILE_IMAGE_NO AS PROFILE_IMAGE_NO
			FROM MEMBER
				LEFT JOIN FOLLOW ON FOLLOW.FOLLOW_MEMBER_NO = MEMBER.MEMBER_NO
				LEFT JOIN MEMBER TARGET_MEMBER ON FOLLOW.FOLLOW_TARGET_MEMBER_NO = TARGET_MEMBER.MEMBER_NO
				LEFT JOIN PROFILE_IMAGE ON TARGET_MEMBER.MEMBER_PROFILE_IMAGE_NO = PROFILE_IMAGE.PROFILE_IMAGE_NO
			
			WHERE MEMBER.MEMBER_NO =#{mNo}
				AND MEMBER.MEMBER_STATUS = 'Y'
<<<<<<< HEAD
	
		   		
		</select>
		
		
		
  	<select id="selectComment">
   		SELECT 
   			COMMENT_NO, COMMENT_WRITER_MEMBER_NO, COMMENT_TEXT
   		FROM "COMMENT"
   		WHERE COMMENT_MEMBER_NO = #{mNo}
   		ORDER BY COMMENT_NO DESC
   
   </select>
 	
 	
 	<insert id="insertProfileImage" parameterType="memberExt" useGeneratedKeys="true">
=======
	
	<select id="loadUserByUsername" resultMap="memberExtMap">
		SELECT 
			MEMBER_NO, PROFILE_IMAGE_PATH, 
			MEMBER_BANNER_PATH,
			MEMBER_SOCIAL_SOCIAL_NAME, 
			MEMBER_SOCIAL_SOCIAL_ID,
			MEMBER_NICKNAME, MEMBER_EMAIL, 
			MEMBER_INTRODUCE, 
			MEMBER_GRADE_NAME,
			PROFILE_IMAGE_NO
		FROM MEMBER
		JOIN MEMBER_SOCIAL ON MEMBER_SOCIAL_MEMBER_NO = MEMBER_NO
		JOIN MEMBER_GRADE USING(MEMBER_GRADE_NO)
		JOIN MEMBER_BANNER USING(MEMBER_BANNER_NO)
		JOIN PROFILE_IMAGE ON MEMBER_PROFILE_IMAGE_NO = PROFILE_IMAGE_NO
		WHERE
		MEMBER_SOCIAL_SOCIAL_ID = #{socialId}
		AND
		MEMBER_SOCIAL_SOCIAL_NAME = #{socialType}
		AND
		MEMBER_STATUS = 'Y'
	</select>
	
	<insert id="insertProfileImage" parameterType="memberExt" useGeneratedKeys="true">
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
	
		   		
		</select>
		
		
		
  	<select id="selectComment">
   		SELECT 
   			COMMENT_NO, COMMENT_WRITER_MEMBER_NO, COMMENT_TEXT
   		FROM "COMMENT"
   		WHERE COMMENT_MEMBER_NO = #{mNo}
   		ORDER BY COMMENT_NO DESC
   
   </select>
 	
 	
 	<insert id="insertProfileImage" parameterType="memberExt" useGeneratedKeys="true">
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
 		<selectKey resultType="int" order="BEFORE" keyProperty="profileImage.profileImageNo" >
 			SELECT SEQ_MEMBER_PROFILE_IMAGE_NO.NEXTVAL FROM DUAL
 		</selectKey>
 	
<<<<<<< HEAD
<<<<<<< HEAD
 	<!-- 1번 selectKey 사용하여 MemberExt 객체에 profileImageNo 얻어오기 -->
=======
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
 	<!-- 1번 selectKey 사용하여 MemberExt 객체에 profileImageNo 얻어오기 -->
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
 		INSERT INTO PROFILE_IMAGE
 		VALUES(
			#{profileImage.profileImageNo},
			#{profileImage.profileImagePath}
		)
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
 		
 	</insert>
 	
 	
 	
 	
 	
 	<insert id="insertMember" useGeneratedKeys="true">
<<<<<<< HEAD
	
		<selectKey resultType="int" order="BEFORE" keyProperty="memberNo">
			SELECT SEQ_MEMBER_NO.NEXTVAL FROM DUAL
		</selectKey>
		
		 	INSERT INTO MEMBER
		 	VALUES(
				#{memberNo},
				#{profileImage.profileImageNo},
				DEFAULT,
				DEFAULT,
				#{memberNickname},
				#{memberEmail},
				DEFAULT,
				DEFAULT,
				DEFAULT,
				DEFAULT
			)
 	
 	</insert>
 	
 	 <insert id="insertMemberSocial">
 		INSERT INTO MEMBER_SOCIAL
 		VALUES(
=======
	</insert>
=======
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
	
		<selectKey resultType="int" order="BEFORE" keyProperty="memberNo">
			SELECT SEQ_MEMBER_NO.NEXTVAL FROM DUAL
		</selectKey>
<<<<<<< HEAD
		INSERT INTO MEMBER
		VALUES(
			#{memberNo},
			#{profileImage.profileImageNo},
			DEFAULT,
			DEFAULT,
			#{memberNickname},
			#{memberEmail},
			DEFAULT,
			DEFAULT,
			DEFAULT,
			DEFAULT
		)
	</insert>
	
	<insert id="insertMemberSocial">
		INSERT INTO MEMBER_SOCIAL
		VALUES(
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
		
		 	INSERT INTO MEMBER
		 	VALUES(
				#{memberNo},
				#{profileImage.profileImageNo},
				DEFAULT,
				DEFAULT,
				#{memberNickname},
				#{memberEmail},
				DEFAULT,
				DEFAULT,
				DEFAULT,
				DEFAULT
			)
 	
 	</insert>
 	
 	 <insert id="insertMemberSocial">
 		INSERT INTO MEMBER_SOCIAL
 		VALUES(
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
			#{memberNo},
			#{memberSocial.memberSocialSocialName},
			#{memberSocial.memberSocialSocialId}
		)
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
 	
 	</insert>
 	
 
 
 
 
 
 
 	
<<<<<<< HEAD
 </mapper>
=======
	</insert>
	
	
	
	

</mapper>
>>>>>>> 27a32552d755c04550be2f6a22e1aab664efa6cf
=======
 </mapper>
>>>>>>> a6e1b7780d0f1506a5bbee4622bc89241faa9c6d
